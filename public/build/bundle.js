var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function u(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function p(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}let g;function h(t){g=t}function w(){if(!g)throw new Error("Function called outside component initialization");return g}function x(t){w().$$.after_update.push(t)}const $=[],b=[],y=[],v=[],C=Promise.resolve();let I=!1;function k(t){y.push(t)}let z=!1;const L=new Set;function M(){if(!z){z=!0;do{for(let t=0;t<$.length;t+=1){const e=$[t];h(e),j(e.$$)}for($.length=0;b.length;)b.pop()();for(let t=0;t<y.length;t+=1){const e=y[t];L.has(e)||(L.add(e),e())}y.length=0}while($.length);for(;v.length;)v.pop()();I=!1,z=!1,L.clear()}}function j(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(k)}}const F=new Set;let Q;function S(){Q={r:0,c:[],p:Q}}function N(){Q.r||o(Q.c),Q=Q.p}function _(t,e){t&&t.i&&(F.delete(t),t.i(e))}function q(t,e,n,o){if(t&&t.o){if(F.has(t))return;F.add(t),Q.c.push(()=>{F.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function A(t){t&&t.c()}function B(t,n,s){const{fragment:i,on_mount:c,on_destroy:a,after_update:l}=t.$$;i&&i.m(n,s),k(()=>{const n=c.map(e).filter(r);a?a.push(...n):o(n),t.$$.on_mount=[]}),l.forEach(k)}function E(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function H(t,e){-1===t.$$.dirty[0]&&($.push(t),I||(I=!0,C.then(M)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function J(e,r,s,i,c,l,u=[-1]){const f=g;h(e);const d=r.props||{},p=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:n(),dirty:u};let m=!1;if(p.ctx=s?s(e,d,(t,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&c(p.ctx[t],p.ctx[t]=r)&&(p.bound[t]&&p.bound[t](r),m&&H(e,t)),n}):[],p.update(),m=!0,o(p.before_update),p.fragment=!!i&&i(p.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);p.fragment&&p.fragment.l(t),t.forEach(a)}else p.fragment&&p.fragment.c();r.intro&&_(e.$$.fragment),B(e,r.target,r.anchor),M()}h(f)}class U{$destroy(){E(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}class W extends U{constructor(t){super(),J(this,t,null,null,s,{})}}function O(e){let n,o,s;return{c(){n=l("div"),o=l("button"),o.innerHTML='<label class="text-logincolor hover:text-gray-500 py-3 px-4 w-full inline-flex items-center justify-center cursor-pointer text-white"><svg class="pointer-events-none fill-current" height="18" viewBox="0 0 24 24" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"></path></svg> \n            <span class="ml-2 pointer-events-none text-white">adicionar arquivos</span></label>',m(o,"class","overflow-hidden block relative mx-auto border-0"),m(n,"class","w-full mt-4")},m(t,a,l){c(t,n,a),i(n,o),l&&s(),s=p(o,"click",(function(){r(e[0])&&e[0].apply(this,arguments)}))},p(t,[n]){e=t},i:t,o:t,d(t){t&&a(n),s()}}}function D(t,e,n){let{onChange:o}=e;return t.$set=t=>{"onChange"in t&&n(0,o=t.onChange)},[o]}class V extends U{constructor(t){super(),J(this,t,D,O,s,{onChange:0})}}function P(e){let n,o,r,s,p,g,h,w,x,$,b;return{c(){n=l("span"),n.innerHTML='<svg width="60px" height="44px"><use xlinkhref="#fuerza-icon"></use></svg>',o=d(),r=u("svg"),s=u("symbol"),p=u("style"),g=f(".st0 {\n  fill: none;\n  stroke-width: 15;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n  stroke-miterlimit: 10;\n}\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9Mb2dvLnN2ZWx0ZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUNJLFVBQVU7RUFDVixnQkFBZ0I7RUFDaEIscUJBQXFCO0VBQ3JCLHNCQUFzQjtFQUN0QixxQkFBcUI7QUFDekIiLCJmaWxlIjoic3JjL0xvZ28uc3ZlbHRlIiwic291cmNlc0NvbnRlbnQiOlsiXG4uc3QwIHtcbiAgICBmaWxsOiBub25lO1xuICAgIHN0cm9rZS13aWR0aDogMTU7XG4gICAgc3Ryb2tlLWxpbmVjYXA6IHJvdW5kO1xuICAgIHN0cm9rZS1saW5lam9pbjogcm91bmQ7XG4gICAgc3Ryb2tlLW1pdGVybGltaXQ6IDEwO1xufVxuIl19 */"),h=u("path"),w=u("path"),x=u("path"),$=u("path"),b=u("path"),m(n,"class","logo"),m(h,"class","st0"),m(h,"d","M334 531.5L284 355 7.5 225.5l93 176z"),m(w,"class","st0"),m(w,"d","M212.5 7.5l265 110L284 355 7.5 225.5z"),m(x,"class","st0"),m(x,"d","M492 291l-14.5-173.5L284 355l50 176.5z"),m($,"class","st0"),m($,"d","M7.5 225.5l378.5 4.3-270.9-118.7 362.4 6.4-165.8 335.4 173.9-239L334 531.5"),m(b,"class","st0"),m(b,"d","M284 355L59.8 324.5l251.9 128.4-211.2-51.4"),m(s,"id","fuerza-icon"),m(s,"xmlns","http://www.w3.org/2000/svg"),m(s,"viewBox","0 0 499.5 539"),m(r,"class","hidden")},m(t,e){c(t,n,e),c(t,o,e),c(t,r,e),i(r,s),i(s,p),i(p,g),i(s,h),i(s,w),i(s,x),i(s,$),i(s,b)},p:t,i:t,o:t,d(t){t&&a(n),t&&a(o),t&&a(r)}}}class R extends U{constructor(t){super(),J(this,t,null,P,s,{})}}const T=[];const Z=function(e,n=t){let o;const r=[];function i(t){if(s(e,t)&&(e=t,o)){const t=!T.length;for(let t=0;t<r.length;t+=1){const n=r[t];n[1](),T.push(n,e)}if(t){for(let t=0;t<T.length;t+=2)T[t][0](T[t+1]);T.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(s,c=t){const a=[s,c];return r.push(a),1===r.length&&(o=n(i)||t),s(e),()=>{const t=r.indexOf(a);-1!==t&&r.splice(t,1),0===r.length&&(o(),o=null)}}}}([]),X=window.require("fs"),G=window.require("path"),Y=window.require("dataurl");const K=window.require("fs"),tt=window.require("path"),et=window.require("fluent-ffmpeg"),{remote:nt}=window.require("electron"),ot=nt.getGlobal("ffmpegpath");function rt(t,e,n=2){if("number"!=typeof t&&"number"!=typeof e)throw new Error("Parameter is not a number!");return Number((100*t/e).toFixed(n))}et.setFfmpegPath(ot),window.AudioContext=window.AudioContext||window.webkitAudioContext;const st=new AudioContext,it=t=>{const e=t.getChannelData(0),n=Math.floor(e.length/180),o=[];for(let t=0;t<180;t++){let r=n*t,s=0;for(let t=0;t<n;t++)s+=Math.abs(e[r+t]);o.push(s/n)}return o},ct=t=>{const e=Math.pow(Math.max(...t),-1);return t.map(t=>t*e)};function at(e){let n,o,r,s,u,p,g=e[1].replace(/[[\]-]+/g," ")+"";return{c(){n=l("li"),o=l("div"),r=l("span"),s=f(g),u=d(),p=l("div"),m(r,"class","text-white text-xs opacity-25 capitalize"),m(o,"class","flex justify-between items-center"),m(p,"class","progressbar w-full"),m(n,"class","relative py-3 text-sm leading-5")},m(t,a){c(t,n,a),i(n,o),i(o,r),i(r,s),i(n,u),i(n,p),e[7](p)},p(t,[e]){2&e&&g!==(g=t[1].replace(/[[\]-]+/g," ")+"")&&function(t,e){e=""+e,t.data!==e&&(t.data=e)}(s,g)},i:t,o:t,d(t){t&&a(n),e[7](null)}}}function lt(t){console.error({error:t})}function ut(t,e,n){let o,r,s,i,{item:c={}}=e;function a(t){Z.update(e=>[...e].map(e=>(e.song===r&&(e.status=t),e)))}function l(t){o.style.setProperty("--progress",t/100),Z.update(t=>[...t].map(t=>(t.song===r&&(t.progress=i),t))),100===t&&(a("done"),Z.update(t=>{const e=[...t].find(({status:t})=>"waiting"===t);return e?[...[...t].filter(({song:t})=>t!==e.song),{...e,status:"current"}]:t}))}return x(()=>{"current"===i&&(requestIdleCallback(async()=>{const t=await(e=r,new Promise((t,n)=>{X.readFile(e,(e,o)=>{e&&n(e),t(Y.convert({data:o,mimetype:"audio/mp3"}))})}));var e;const n=await(o=t,fetch(o).then(t=>t.arrayBuffer()).then(t=>st.decodeAudioData(t)).then(t=>ct(it(t))));var o;!function(t,e){const n=G.basename(t),o=G.dirname(t),r=G.extname(t),s=o+"/waveform";X.existsSync(s)||X.mkdirSync(s,"0744");const i=`${s}/${G.basename(n,r)}.json`;X.writeFileSync(i,e)}(r,JSON.stringify(n))}),requestIdleCallback(async()=>{a("processing"),function({file:t,onProgress:e,err:n=console.log}){const o=tt.basename(t),r=tt.dirname(t),s=tt.extname(t),i=r+"/mp3";K.existsSync(i)||K.mkdirSync(i,"0744");const c=K.createWriteStream(`${i}/${tt.basename(o,s)}.mp3`),a=K.statSync(t),l=new et(t);l.toFormat("mp3").on("error",n).on("progress",t=>e(rt(1e4*t.targetSize,a.size))).on("end",()=>e(rt(a.size,a.size))).writeToStream(c,{end:!0})}({file:r,onProgress:l,err:lt})}))}),t.$set=t=>{"item"in t&&n(2,c=t.item)},t.$$.update=()=>{4&t.$$.dirty&&(r=c.song),4&t.$$.dirty&&n(1,s=c.name),4&t.$$.dirty&&(i=c.status)},[o,s,c,r,i,a,l,function(t){b[t?"unshift":"push"](()=>{n(0,o=t)})}]}class ft extends U{constructor(t){super(),J(this,t,ut,at,s,{item:2})}}const dt=window.require("electron"),pt=window.require("path");function mt(){return dt.remote.dialog.showOpenDialog({filters:[{name:"MÃºsicas",extensions:["ogg","wav","mp3"]}],properties:["openFile","multiSelections"]}).then(t=>{const e=t.filePaths.map(t=>{const e=pt.basename(t),n=pt.extname(t);return{song:t,name:pt.basename(e,n),status:"waiting"}});Z.update(()=>e)}).catch(t=>alert(t))}function gt(t,e,n){const o=t.slice();return o[2]=e[n],o}function ht(t){let e,n,o=t[0],r=[];for(let e=0;e<o.length;e+=1)r[e]=wt(gt(t,o,e));const s=t=>q(r[t],1,1,()=>{r[t]=null});return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=f("")},m(t,o){for(let e=0;e<r.length;e+=1)r[e].m(t,o);c(t,e,o),n=!0},p(t,n){if(1&n){let i;for(o=t[0],i=0;i<o.length;i+=1){const s=gt(t,o,i);r[i]?(r[i].p(s,n),_(r[i],1)):(r[i]=wt(s),r[i].c(),_(r[i],1),r[i].m(e.parentNode,e))}for(S(),i=o.length;i<r.length;i+=1)s(i);N()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)_(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)q(r[t]);n=!1},d(t){!function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(r,t),t&&a(e)}}}function wt(t){let e;const n=new ft({props:{item:t[2]}});return{c(){A(n.$$.fragment)},m(t,o){B(n,t,o),e=!0},p(t,e){const o={};1&e&&(o.item=t[2]),n.$set(o)},i(t){e||(_(n.$$.fragment,t),e=!0)},o(t){q(n.$$.fragment,t),e=!1},d(t){E(n,t)}}}function xt(t){let e,n,r,s,u,f,g,h,w,x=t[0].length&&ht(t);return{c(){e=l("div"),n=l("ul"),x&&x.c(),r=d(),s=l("div"),u=l("button"),u.textContent="iniciar",f=d(),g=l("button"),g.textContent="clear",m(n,"class","songs-lists relative left-0 py-4"),m(u,"type","button"),m(u,"class","text-white flex items-center justify-center px-4 py-2 border border-transparent text-sm leading-5 font-medium rounded-lg focus:outline-none focus:shadow-outline transition ease-in-out duration-150 mr-4 bg-green-500 hover:bg-green-700"),m(g,"type","button"),m(g,"class","flex items-center justify-center px-4 py-2 border border-transparent text-sm leading-5 font-medium rounded-lg text-gray-900 hover:text-gray-600 focus:outline-none focus:shadow-outline transition ease-in-out duration-150 bg-white"),m(s,"class","flex justify-center items-center px-12 mt-4"),m(e,"class","my-6 mb-2 w-full lg:w-6/12 ")},m(t,a,l){c(t,e,a),i(e,n),x&&x.m(n,null),i(e,r),i(e,s),i(s,u),i(s,f),i(s,g),h=!0,l&&o(w),w=[p(u,"click",$t,{once:!0}),p(g,"click",bt,{once:!0})]},p(t,[e]){t[0].length?x?(x.p(t,e),_(x,1)):(x=ht(t),x.c(),_(x,1),x.m(n,null)):x&&(S(),q(x,1,1,()=>{x=null}),N())},i(t){h||(_(x),h=!0)},o(t){q(x),h=!1},d(t){t&&a(e),x&&x.d(),o(w)}}}function $t(){Z.update(t=>[...t].map((t,e)=>(0===e&&(t.status="current"),t))),Z.update(t=>{const e=t[0];return e.status="current",[e,...t]})}function bt(){Z.update(()=>[])}function yt(t,e,n){let o=[];Z.subscribe(t=>n(0,o=t));return[o]}class vt extends U{constructor(t){super(),J(this,t,yt,xt,s,{})}}function Ct(e){let n;const o=new vt({});return{c(){A(o.$$.fragment)},m(t,e){B(o,t,e),n=!0},p:t,i(t){n||(_(o.$$.fragment,t),n=!0)},o(t){q(o.$$.fragment,t),n=!1},d(t){E(o,t)}}}function It(e){let n;const o=new V({props:{onChange:mt}});return{c(){A(o.$$.fragment)},m(t,e){B(o,t,e),n=!0},p:t,i(t){n||(_(o.$$.fragment,t),n=!0)},o(t){q(o.$$.fragment,t),n=!1},d(t){E(o,t)}}}function kt(e){let n;return{c(){n=l("div"),n.innerHTML='<div class="check-icon"><span class="icon-line line-tip"></span> \n          <span class="icon-line line-long"></span> \n          <div class="icon-circle"></div> \n          <div class="icon-fix"></div></div>',m(n,"class","success-checkmark py-10")},m(t,e){c(t,n,e)},p:t,i:t,o:t,d(t){t&&a(n)}}}function zt(t){let e,n,o,r,s,u,f;const p=new W({}),g=new R({}),h=[kt,It,Ct],w=[];function x(t,e){return t[1]?0:t[0].length?2:1}return s=x(t),u=w[s]=h[s](t),{c(){A(p.$$.fragment),e=d(),n=l("main"),A(g.$$.fragment),o=d(),r=l("div"),u.c(),m(r,"class","wrapper w-10/12 lg:w-6/12 px-2 sm:px-8 mt-12 flex items-center svelte-1su4bqu"),m(n,"class","svelte-1su4bqu")},m(t,a){B(p,t,a),c(t,e,a),c(t,n,a),B(g,n,null),i(n,o),i(n,r),w[s].m(r,null),f=!0},p(t,[e]){let n=s;s=x(t),s===n?w[s].p(t,e):(S(),q(w[n],1,1,()=>{w[n]=null}),N(),u=w[s],u||(u=w[s]=h[s](t),u.c()),_(u,1),u.m(r,null))},i(t){f||(_(p.$$.fragment,t),_(g.$$.fragment,t),_(u),f=!0)},o(t){q(p.$$.fragment,t),q(g.$$.fragment,t),q(u),f=!1},d(t){E(p,t),t&&a(e),t&&a(n),E(g),w[s].d()}}}function Lt(t,e,n){let o,r,s=!1;const i=Z.subscribe(t=>n(0,o=t));var c;return x(()=>{r=o.filter(({status:t})=>"done"===t),o.length&&r.length===o.length&&(n(1,s=!0),Z.update(()=>[]),setTimeout(()=>n(1,s=!1),2e3))}),c=()=>i(),w().$$.on_destroy.push(c),n(0,o=[]),[o,s]}return new class extends U{constructor(t){super(),J(this,t,Lt,zt,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
